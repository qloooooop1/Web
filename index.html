<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>رمضان 🌙</title>
    <!-- إضافة Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <style>
        body {
            font-family: 'Tajawal', sans-serif;
            text-align: center;
            background-color: #f0f8ff;
            direction: rtl;
            position: relative;
            overflow: hidden;
        }
        #countdown {
            font-size: 2em;
            color: #2e8b57;
            margin-top: 20px;
        }
        #prayer {
            font-size: 1.5em;
            margin: 20px;
            padding: 15px;
            background-color: #fff;
            border-radius: 10px;
            cursor: pointer;
        }
        #prayer:hover {
            background-color: #e0ffff;
        }
        #shareBtn, .gameBtn {
            padding: 10px 20px;
            background-color: #32cd32;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        #points {
            font-size: 1.2em;
            color: #ff8c00;
        }
        #leaderboard {
            margin: 20px;
            padding: 15px;
            background-color: #fff;
            border-radius: 10px;
            max-width: 300px;
            display: inline-block;
        }
        #leaderboard h3 {
            margin: 0;
            color: #2e8b57;
        }
        #leaderboard ul {
            list-style: none;
            padding: 0;
        }
        #leaderboard li {
            padding: 5px;
            font-size: 1.1em;
        }
        #eid {
            display: none;
            font-size: 3em;
            color: #ff4500;
        }
        .star {
            position: absolute;
            font-size: 2em;
            cursor: pointer;
            transition: all 0.2s;
        }
        #gameArea {
            margin: 20px;
            padding: 20px;
            background-color: #fff;
            border-radius: 10px;
            display: none;
        }
    </style>
</head>
<body>
    <h1>رمضان <i class="fas fa-moon"></i></h1>
    <input type="text" id="userName" placeholder="أدخل اسمك لتبدأ" style="margin-bottom: 10px;">
    <div id="countdown"></div>
    <div id="points">نجومك: 0 <i class="fas fa-star"></i></div>
    <div id="prayer" onclick="changePrayer()">اضغط لعرض دعاء اليوم <i class="fas fa-pray"></i></div>
    <button id="shareBtn" style="display: none;" onclick="sharePrayer()">شارك دعاء اليوم <i class="fas fa-share-alt"></i></button>
    <div id="globalStats">انضم 0 شخص إلى تحدي رمضان</div>
    <div>
        <button class="gameBtn" onclick="startStarGame()">اجمع النجوم <i class="fas fa-star"></i></button>
        <button class="gameBtn" onclick="startGuessGame()">خمن السورة <i class="fas fa-book-open"></i></button>
        <button class="gameBtn" onclick="startQuizGame()">مسابقة رمضانية <i class="fas fa-question-circle"></i></button>
    </div>
    <div id="gameArea"></div>
    <div id="leaderboard">
        <h3><i class="fas fa-trophy"></i> الأكثر جمعًا للنجوم</h3>
        <ul id="leaderList"></ul>
    </div>
    <div id="eid">عيد فطر مبارك <i class="fas fa-fireworks"></i></div>

    <script>
        const ramadanStart = new Date('March 1, 2025 00:00:00').getTime();
        const prayers = [
            "اللهم بلغنا رمضان لا فاقدين ولا مفقودين 🌙",
            "اللهم إنك عفو تحب العفو فاعف عنا 🤲",
            "اللهم اجعل صيامي فيه صيام الصائمين وقيامي فيه قيام القائمين 🕋",
            "اللهم تقبل منا صالح الأعمال في رمضان ⭐"
        ];
        const surahs = [
            { text: "قُلْ هُوَ اللَّهُ أَحَدٌ", name: "سورة الإخلاص", options: ["الفاتحة", "الإخلاص", "الناس"] },
            { text: "تَبَّتْ يَدَا أَبِي لَهَبٍ", name: "سورة المسد", options: ["المسد", "الفلق", "الكوثر"] }
        ];
        const quizQuestions = [
            { question: "ما هو أول يوم يبدأ فيه الصيام؟", answer: "الفجر", options: ["الظهر", "الفجر", "المغرب"] },
            { question: "ما اسم الليلة التي تُعتبر خير من ألف شهر؟", answer: "ليلة القدر", options: ["ليلة النصف", "ليلة القدر", "ليلة العيد"] }
        ];
        let prayerIndex = 0;
        let points = 0;
        let userName = "";
        let globalUsers = Math.floor(Math.random() * 1000);
        let leaderboard = [
            { name: "أحمد", points: 25 },
            { name: "فاطمة", points: 20 },
            { name: "محمد", points: 15 },
            { name: "زينب", points: 10 },
            { name: "عمر", points: 5 }
        ];

        // العداد
        function updateCountdown() {
            const now = new Date().getTime();
            const distance = ramadanStart - now;
            userName = document.getElementById("userName").value || "زائر";

            if (distance <= 0) {
                const daysInRamadan = Math.floor((now - ramadanStart) / (1000 * 60 * 60 * 24));
                if (daysInRamadan < 30) {
                    document.getElementById("countdown").innerHTML = `${userName}، رمضان مبارك! اليوم ${daysInRamadan + 1} من رمضان <i class="fas fa-star"></i>`;
                } else {
                    document.getElementById("countdown").style.display = "none";
                    document.getElementById("prayer").style.display = "none";
                    document.getElementById("shareBtn").style.display = "none";
                    document.getElementById("eid").style.display = "block";
                    startFireworks();
                }
            } else {
                const days = Math.floor(distance / (1000 * 60 * 60 * 24));
                const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((distance % (1000 * 60)) / 1000);
                document.getElementById("countdown").innerHTML = 
                    `${userName}، باقي ${days} أيام ${hours} ساعات ${minutes} دقائق ${seconds} ثوانٍ حتى رمضان <i class="fas fa-moon"></i>`;
            }
            updateLeaderboard();
        }

        // تغيير الدعاء
        function changePrayer() {
            prayerIndex = (prayerIndex + 1) % prayers.length;
            points++;
            document.getElementById("prayer").innerHTML = `دعاء اليوم ${prayerIndex + 1}: ${prayers[prayerIndex]}`;
            document.getElementById("points").innerHTML = `نجومك: ${points} <i class="fas fa-star"></i>`;
            document.getElementById("shareBtn").style.display = "block";
            document.getElementById("globalStats").innerHTML = `انضم ${globalUsers + points} شخص إلى تحدي رمضان`;
            updateLeaderboard();
            if (points === prayers.length) {
                alert(`${userName}، أكملت التحدي! أنت بطل رمضان <i class="fas fa-trophy"></i>`);
            }
        }

        // مشاركة الدعاء
        function sharePrayer() {
            const text = `دعاء اليوم من رمضان: ${prayers[prayerIndex]} 🌙 انضم إلى تحدي رمضان: ${window.location.href}`;
            const whatsappUrl = `https://api.whatsapp.com/send?text=${encodeURIComponent(text)}`;
            window.open(whatsappUrl, '_blank');
        }

        // تحديث لوحة الصدارة
        function updateLeaderboard() {
            let userEntry = { name: userName, points: points };
            let updated = false;
            for (let i = 0; i < leaderboard.length; i++) {
                if (leaderboard[i].points < points && !updated) {
                    leaderboard.splice(i, 0, userEntry);
                    updated = true;
                }
            }
            if (!updated && leaderboard.length < 5) leaderboard.push(userEntry);
            leaderboard = leaderboard.slice(0, 5).sort((a, b) => b.points - a.points);

            let list = "";
            leaderboard.forEach((entry, index) => {
                list += `<li>${index + 1}. ${entry.name}: ${entry.points} <i class="fas fa-star"></i></li>`;
            });
            document.getElementById("leaderList").innerHTML = list;
        }

        // لعبة اجمع النجوم
        function startStarGame() {
            document.getElementById("gameArea").style.display = "block";
            document.getElementById("gameArea").innerHTML = "انقر على النجوم لجمعها!";
            for (let i = 0; i < 5; i++) {
                const star = document.createElement("div");
                star.className = "star";
                star.innerHTML = '<i class="fas fa-star"></i>';
                star.style.left = Math.random() * 90 + "%";
                star.style.top = Math.random() * 90 + "%";
                star.onclick = () => {
                    points++;
                    document.getElementById("points").innerHTML = `نجومك: ${points} <i class="fas fa-star"></i>`;
                    star.remove();
                    updateLeaderboard();
                };
                document.body.appendChild(star);
                setTimeout(() => star.remove(), 5000);
            }
            setTimeout(() => document.getElementById("gameArea").style.display = "none", 6000);
        }

        // لعبة خمن السورة
        function startGuessGame() {
            document.getElementById("gameArea").style.display = "block";
            const surah = surahs[Math.floor(Math.random() * surahs.length)];
            let html = `<p>خمن السورة: "${surah.text}"</p>`;
            surah.options.forEach(option => {
                html += `<button onclick="checkGuess('${option}', '${surah.name}')">${option}</button>`;
            });
            document.getElementById("gameArea").innerHTML = html;
        }
        function checkGuess(selected, correct) {
            if (selected === correct) {
                points++;
                document.getElementById("points").innerHTML = `نجومك: ${points} <i class="fas fa-star"></i>`;
                document.getElementById("gameArea").innerHTML = "إجابة صحيحة! <i class="fas fa-check-circle"></i>";
                updateLeaderboard();
            } else {
                document.getElementById("gameArea").innerHTML = `خطأ! الإجابة الصحيحة: ${correct}`;
            }
            setTimeout(() => document.getElementById("gameArea").style.display = "none", 2000);
        }

        // لعبة مسابقة رمضانية
        function startQuizGame() {
            document.getElementById("gameArea").style.display = "block";
            const quiz = quizQuestions[Math.floor(Math.random() * quizQuestions.length)];
            let html = `<p>${quiz.question}</p>`;
            quiz.options.forEach(option => {
                html += `<button onclick="checkQuiz('${option}', '${quiz.answer}')">${option}</button>`;
            });
            document.getElementById("gameArea").innerHTML = html;
        }
        function checkQuiz(selected, correct) {
            if (selected === correct) {
                points++;
                document.getElementById("points").innerHTML = `نجومك: ${points} <i class="fas fa-star"></i>`;
                document.getElementById("gameArea").innerHTML = "إجابة صحيحة! <i class="fas fa-check-circle"></i>";
                updateLeaderboard();
            } else {
                document.getElementById("gameArea").innerHTML = `خطأ! الإجابة الصحيحة: ${correct}`;
            }
            setTimeout(() => document.getElementById("gameArea").style.display = "none", 2000);
        }

        // الألعاب النارية
        function startFireworks() {
            document.body.style.backgroundColor = "#ffe4b5";
            for (let i = 0; i < 20; i++) {
                const star = document.createElement("div");
                star.className = "star";
                star.innerHTML = '<i class="fas fa-fireworks"></i>';
                star.style.left = Math.random() * 90 + "%";
                star.style.top = Math.random() * 90 + "%";
                document.body.appendChild(star);
                setTimeout(() => star.remove(), 2000);
            }
        }

        setInterval(updateCountdown, 1000);
        setInterval(updateLeaderboard, 10000); // تحديث دوري كل 10 ثوانٍ
    </script>
</body>
</html>